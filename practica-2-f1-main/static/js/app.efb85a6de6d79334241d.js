webpackJsonp([1],{"18oO":function(t,e,a){var n={"./Basketball.jpeg":"hySn","./Football.jpeg":"Y/Lu","./Futsal.jpeg":"oCM9","./Volleyball.jpeg":"KrC8"};function s(t){return a(o(t))}function o(t){var e=n[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}s.keys=function(){return Object.keys(n)},s.resolve=o,t.exports=s,s.id="18oO"},Jo76:function(t,e){},KrC8:function(t,e,a){t.exports=a.p+"static/img/Volleyball.6f1a079.jpeg"},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Tqaz"),s=(a("sWs5"),a("7+uW")),o={render:function(){var t=this.$createElement;return(this._self._c||t)("router-view")},staticRenderFns:[]};var r=a("VU/8")({name:"App"},o,!1,function(t){a("U0RV")},null,null).exports,i=a("/ocq"),c=a("//Fk"),l=a.n(c),u=a("mtWM"),d=a.n(u),m={data:function(){return{actual_path:"https://f1-sportsmaster.herokuapp.com/",is_showing_cart:!1,title:"Sports matches",tickets_bought:0,money_available:0,logged:!1,matches_added:[],matches:[]}},methods:{goToLogin:function(){this.$router.replace({path:"/login"})},logOut:function(){this.logged=!1,this.$router.replace({path:"/"}),location.reload()},toggleCart:function(){this.is_showing_cart=!this.is_showing_cart},buyTicket:function(t){t.quantity++},returnTicket:function(t){t.quantity>1&&t.quantity--},addEventToCart:function(t){var e={match:t,quantity:1};this.matches_added.filter(function(e){return e.match===t}).length?alert("This match is already in cart."):this.matches_added.push(e)},finalizePurchase:function(){if(this.logged){var t=[];this.matches_added.forEach(function(e){var a={match_id:e.match.id,tickets_bought:e.quantity};t.push(a)}),this.addPurchase({orders:t})}else alert("You have to Sign In to be able to purchase tickets"),this.goToLogin()},addPurchase:function(t){var e=this,a=this.actual_path+"/orders/"+this.username;d.a.post(a,t,{auth:{username:this.token}}).then(function(){console.log("Order done"),e.matches_added=[],e.getAccount(),e.getMatches()}).catch(function(t){alert(t.response.data.message)})},deleteEventFromCart:function(t){var e=this.matches_added.indexOf(t);this.matches_added.splice(e,1)},getMatches:function(){var t=this,e=this.actual_path+"matches",a=this.actual_path+"competition/";d.a.get(e).then(function(e){for(var n=e.data["Matches List"].filter(function(t){return null!=t.competition_id}),s=[],o=function(t){var e=d.a.get(a+n[t].competition_id).then(function(e){delete n[t].competition_id,n[t].competition={name:e.data.competition.name,category:e.data.competition.category,sport:e.data.competition.sport}}).catch(function(t){console.error(t)});s.push(e)},r=0;r<n.length;r++)o(r);l.a.all(s).then(function(e){t.matches=n})}).catch(function(t){console.error(t)})},getAccount:function(){var t=this;if(this.logged){var e=this.actual_path+"account/"+this.username;d.a.get(e,{auth:{username:this.token}}).then(function(e){e.data.account?(t.is_admin=e.data.account.is_admin,t.money_available=e.data.account.available_money):t.logOut()}).catch(function(e){console.error(e),t.logOut()})}}},created:function(){this.getMatches(),this.username=this.$route.query.username,void 0===this.$route.query.logged?this.logged=!1:this.logged=this.$route.query.logged,this.token=this.$route.query.token,this.getAccount()}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar navbar-light bg-dark sticky-top"},[t._m(0),t._v(" "),n("div",{staticClass:"row"},[n("h3",{directives:[{name:"show",rawName:"v-show",value:t.logged,expression:"logged"}],staticClass:"profile-form"},[t._v("\n        🙎‍♂️ "+t._s(t.username)+"   \n        "),n("span",{staticStyle:{"font-size":"80%"}},[t._v("\n          💰 "+t._s(t.money_available.toFixed(2))+" €")])]),t._v(" "),t.is_showing_cart?n("button",{staticClass:"btn btn-outline-primary btn-md r-margin",on:{click:t.toggleCart}},[t._v(" Close cart ")]):n("button",{staticClass:"btn btn-outline-primary btn-md r-margin",on:{click:t.toggleCart}},[t._v("\n        View cart "),n("span",{staticClass:"cart-count"},[t._v(" "+t._s(t.matches_added.length)+" ")])]),t._v(" "),t.logged?n("button",{staticClass:"btn btn-outline-success btn-md r-margin",on:{click:t.logOut}},[t._v(" Sign Out ")]):n("button",{staticClass:"btn btn-outline-primary btn-md r-margin",on:{click:t.goToLogin}},[t._v(" Sign In ")])])]),t._v(" "),n("div",{staticClass:"background"},[t.is_showing_cart?n("div",{staticClass:"container",staticStyle:{"background-color":"white","padding-top":"50px","padding-bottom":"50px"}},[n("h1",[t._v("Cart")]),t._v(" "),t.matches_added.length>0?n("table",{staticClass:"table table-hover"},[t._m(1),t._v(" "),n("tbody",t._l(t.matches_added,function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.match.competition.sport))]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.match.competition.name))]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.match.local.name)+" vs "+t._s(e.match.visitor.name))]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.quantity)+"\n            "),n("div",{staticClass:"btn-group",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-danger btn-md mr-1",attrs:{disabled:1===e.quantity},on:{click:function(a){return t.returnTicket(e)}}},[n("b",[t._v("-")])]),t._v(" "),n("button",{staticClass:"btn btn-success btn-md",on:{click:function(a){return t.buyTicket(e)}}},[n("b",[t._v("+")])])])]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s(e.match.price))]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[t._v(t._s((e.match.price*e.quantity).toFixed(2)))]),t._v(" "),n("td",{staticStyle:{"text-align":"center"}},[n("button",{staticClass:"btn btn-danger btn-md",on:{click:function(a){return t.deleteEventFromCart(e)}}},[t._v("\n              Delete Ticket\n            ")])])])}),0)]):n("p",[t._v("Your cart is currently empty.")]),t._v(" "),n("div",{staticClass:"btn-group",attrs:{role:"group"}},[n("button",{staticClass:"btn btn-secondary btn-lg mr-1",on:{click:t.toggleCart}},[n("b",[t._v("Back")])]),t._v(" "),n("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:0===t.matches_added.length},on:{click:t.finalizePurchase}},[n("b",[t._v("Purchase")])])])]):n("div",{staticClass:"container"},[n("div",{staticClass:"row"},t._l(t.matches,function(e){return n("div",{key:e.id,staticClass:"col-lg-4 col-md-6 mb-4"},[n("div",{staticClass:"card",staticStyle:{width:"20rem"}},[n("img",{staticClass:"card-img-top img-fluid",attrs:{src:a("18oO")("./"+e.competition.sport+".jpeg")}}),t._v(" "),n("div",{staticClass:"card-body"},[n("h5",{staticClass:"card-title"},[t._v(t._s(e.competition.sport)+" - "+t._s(e.competition.category))]),t._v(" "),n("h6",[t._v(" "+t._s(e.competition.name)+" ")]),t._v(" "),n("h6",[n("strong",[t._v(t._s(e.local.name))]),t._v(" ("+t._s(e.local.country)+") vs "),n("strong",[t._v(t._s(e.visitor.name))]),t._v(" ("+t._s(e.visitor.country)+")")]),t._v(" "),n("h6",[t._v(t._s(e.date.substring(0,10)))]),t._v(" "),n("h6",[t._v(t._s(e.price)+" €")]),t._v(" "),n("h6",[t._v("Entrades disponibles: "+t._s(e.total_available_tickets))]),t._v(" "),n("button",{staticClass:"btn btn-success btn-lg",attrs:{disabled:0===e.total_available_tickets},on:{click:function(a){return t.addEventToCart(e)}}},[t._v("\n              Add to cart\n            ")])])])])}),0)])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"navbar-brand"},[e("span",{staticClass:"mb-0 h2",staticStyle:{color:"lightgray","padding-left":"20px"}},[this._v("Sports Matches")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("Sport")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Competition")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Match")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Quantity")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Price(€)")]),t._v(" "),a("th",{staticStyle:{"text-align":"center"}},[t._v("Total")]),t._v(" "),a("th")])])}]};var h=a("VU/8")(m,p,!1,function(t){a("Jo76")},"data-v-644fa314",null).exports,v={name:"Login",data:function(){return{actual_path:"https://f1-sportsmaster.herokuapp.com/",logged:!1,username:null,password:null,token:null,creatingAccount:!1,addUserForm:{username:null,password:null}}},methods:{checkLogin:function(){var t=this,e={username:this.username,password:this.password},a=this.actual_path+"login";d.a.post(a,e).then(function(e){console.log("Login Successful"),t.logged=!0,t.token=e.data.token,alert("Sign In Successfully"),t.$router.push({path:"/",query:{username:t.username,logged:t.logged,token:t.token}})}).catch(function(t){console.error(t),alert("Username or Password incorrect")})},initCreateForm:function(){this.creatingAccount=!0,this.addUserForm.username=null,this.addUserForm.password=null},backToLogin:function(){this.creatingAccount=!1,this.username=null,this.password=null},backToMatches:function(){this.$router.replace({path:"/"})},signUp:function(){var t=this,e={username:this.addUserForm.username,password:this.addUserForm.password},a=this.actual_path+"account";d.a.post(a,e).then(function(){console.log("Register Successful"),alert("Sign Up Successfully"),t.backToLogin()}).catch(function(t){console.error(t),alert("Account already exists")})}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),t.creatingAccount?a("div",{staticClass:"card login-form"},[a("h2",{staticStyle:{"margin-bottom":"40px"}},[t._v("Create Account")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left"},attrs:{for:"inputUsername"}},[t._v("Username")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserForm.username,expression:"addUserForm.username"}],staticClass:"form-control",attrs:{type:"username",id:"input-Username",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.addUserForm.username},on:{input:function(e){e.target.composing||t.$set(t.addUserForm,"username",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("br"),t._v(" "),a("label",{staticStyle:{float:"left"},attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.addUserForm.password,expression:"addUserForm.password"}],staticClass:"form-control",attrs:{type:"password",id:"input-Password",placeholder:"Password",required:""},domProps:{value:t.addUserForm.password},on:{input:function(e){e.target.composing||t.$set(t.addUserForm,"password",e.target.value)}}})]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"flex-parent jc-center buttonMargin"},[a("button",{staticClass:"btn btn-primary buttonWidth",attrs:{disabled:!t.addUserForm.username||!t.addUserForm.password},on:{click:function(e){return t.signUp()}}},[a("b",[t._v("Sign Up")])])]),t._v(" "),a("div",{staticClass:"flex-parent jc-center buttonMargin"},[a("button",{staticClass:"btn btn-secondary buttonWidth",on:{click:function(e){return t.backToLogin()}}},[t._v("Back to Sign In\n      ")])])]):a("div",{staticClass:"card login-form"},[a("h2",{staticStyle:{"margin-bottom":"40px"}},[t._v("Sign In")]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("label",{staticStyle:{float:"left"},attrs:{for:"inputUsername"}},[t._v("Username")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"username",id:"inputUsername",placeholder:"Username",required:"",autofocus:""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-label-group"},[a("br"),t._v(" "),a("label",{staticStyle:{float:"left"},attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("br"),t._v(" "),a("div",{staticClass:"flex-parent jc-center buttonMargin"},[a("button",{staticClass:"btn btn-primary buttonWidth",attrs:{disabled:!t.username||!t.password},on:{click:function(e){return t.checkLogin()}}},[a("b",[t._v("Sign In")])])]),t._v(" "),a("div",{staticClass:"flex-parent jc-center buttonMargin"},[a("button",{staticClass:"btn btn-success buttonWidth",on:{click:function(e){return t.initCreateForm()}}},[a("b",[t._v("Create Account")])])]),t._v(" "),a("div",{staticClass:"flex-parent jc-center buttonMargin"},[a("button",{staticClass:"btn btn-secondary buttonWidth",on:{click:function(e){return t.backToMatches()}}},[t._v("Back to Matches\n      ")])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("nav",{staticClass:"navbar navbar-light bg-dark sticky-top"},[e("a",{staticClass:"navbar-brand"},[e("span",{staticClass:"mb-0 h2",staticStyle:{color:"lightgray","padding-left":"20px"}},[this._v("Sports Matches")])])])}]};var _=a("VU/8")(v,g,!1,function(t){a("QZJ9")},"data-v-b141209a",null).exports;s.default.use(i.a);var b=new i.a({mode:"history",base:Object({NODE_ENV:"production"}).BASE_URL,routes:[{path:"/",name:"Matches",component:h},{path:"/login",name:"Login",component:_}]}),f=a("M0p0");s.default.use(f.a),s.default.use(n.a),s.default.config.productionTip=!1,new s.default({el:"#app",router:b,components:{App:r},template:"<App/>"})},QZJ9:function(t,e){},U0RV:function(t,e){},"Y/Lu":function(t,e,a){t.exports=a.p+"static/img/Football.6020f2e.jpeg"},hySn:function(t,e,a){t.exports=a.p+"static/img/Basketball.ec2e4d4.jpeg"},oCM9:function(t,e,a){t.exports=a.p+"static/img/Futsal.2d64168.jpeg"},sWs5:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.efb85a6de6d79334241d.js.map